{"version":3,"file":"store.e13432ad.js","sources":["../../src/utils/store.ts","../../src/views/util/store.vue"],"sourcesContent":["import { validatenull } from 'utils/validate';\nimport website from '@/config/website';\n\nconst keyName = website.key + '-';\n/**\n * 存储localStorage\n */\nexport const setStore = (params: { name?: string; content?: string; type?: string }) => {\n\tlet { name, content, type } = params;\n\tname = keyName + name;\n\tlet obj = {\n\t\tdataType: typeof content,\n\t\tcontent: content,\n\t\ttype: type,\n\t\tdatetime: new Date().getTime()\n\t};\n\tif (type) window.sessionStorage.setItem(name, JSON.stringify(obj));\n\telse window.localStorage.setItem(name, JSON.stringify(obj));\n};\n/**\n * 获取localStorage\n */\n\nexport const getStore = (params: { name?: string; debug?: string; type?: string }) => {\n\tlet { name, debug } = params;\n\tname = keyName + name;\n\tlet obj = {} as any,\n\t\tcontent;\n\tobj = window.sessionStorage.getItem(name);\n\tif (validatenull(obj)) obj = window.localStorage.getItem(name);\n\tif (validatenull(obj)) return;\n\ttry {\n\t\tobj = JSON.parse(obj);\n\t} catch {\n\t\treturn obj;\n\t}\n\tif (debug) {\n\t\treturn obj;\n\t}\n\tif (obj.dataType == 'string') {\n\t\tcontent = obj.content;\n\t} else if (obj.dataType == 'number') {\n\t\tcontent = Number(obj.content);\n\t} else if (obj.dataType == 'boolean') {\n\t\tcontent = eval(obj.content);\n\t} else if (obj.dataType == 'object') {\n\t\tcontent = obj.content;\n\t}\n\treturn content;\n};\n/**\n * 删除localStorage\n */\nexport const removeStore = (params: { name?: string; debug?: string; type?: string }) => {\n\tlet { name, type } = params;\n\tname = keyName + name;\n\tif (type) {\n\t\twindow.sessionStorage.removeItem(name);\n\t} else {\n\t\twindow.localStorage.removeItem(name);\n\t}\n};\n\n/**\n * 获取全部localStorage\n */\nexport const getAllStore = (params: { name?: string; debug?: string; type?: string }) => {\n\tlet list = [];\n\tlet { type } = params;\n\tif (type) {\n\t\tfor (let i = 0; i <= window.sessionStorage.length; i++) {\n\t\t\tlist.push({\n\t\t\t\tname: window.sessionStorage.key(i),\n\t\t\t\tcontent: getStore({\n\t\t\t\t\tname: window.sessionStorage.key(i) || '',\n\t\t\t\t\ttype: 'session'\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t} else {\n\t\tfor (let i = 0; i <= window.localStorage.length; i++) {\n\t\t\tlist.push({\n\t\t\t\tname: window.localStorage.key(i),\n\t\t\t\tcontent: getStore({\n\t\t\t\t\tname: window.localStorage.key(i) || ''\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t}\n\treturn list;\n};\n\n/**\n * 清空全部localStorage\n */\nexport const clearStore = (params: { name?: string; debug?: string; type?: string }) => {\n\tlet { type } = params;\n\tif (type) {\n\t\twindow.sessionStorage.clear();\n\t} else {\n\t\twindow.localStorage.clear();\n\t}\n};\n","<template>\n\t<basic-container>\n\t\t<h3>存储</h3>\n\t\t<el-tag class=\"title\">基本读写删(持久化存储)</el-tag>\n\t\t<div class=\"box\">\n\t\t\t<el-button type=\"primary\" @click=\"setItem({ name: 'username', value: 'avue' })\">set('username', 'avue')</el-button>\n\n\t\t\t<el-button type=\"success\" @click=\"getItem({ name: 'username' })\">get('username')</el-button>\n\n\t\t\t<el-button type=\"danger\" @click=\"delItem({ name: 'username' })\">remove('username')</el-button>\n\t\t</div>\n\t\t<el-tag class=\"title\">设置session(session存储)</el-tag>\n\t\t<div class=\"box\">\n\t\t\t<el-button type=\"primary\" @click=\"setItem({ name: 'username', value: 'avue', type: 'session' })\">set('username', 'avue')</el-button>\n\n\t\t\t<el-button type=\"success\" @click=\"getItem({ name: 'username', type: 'session' })\">get('username')</el-button>\n\n\t\t\t<el-button type=\"danger\" @click=\"delItem({ name: 'username', type: 'session' })\">remove('username')</el-button>\n\t\t</div>\n\t\t<el-tag class=\"title\">获取所有可以获得的数据</el-tag>\n\t\t<div class=\"box\">\n\t\t\t<el-button type=\"success\" @click=\"getAll()\">getAll(持久化存储)</el-button>\n\t\t\t<el-button type=\"success\" @click=\"getAll({ type: 'session' })\">getAll(session存储)</el-button>\n\t\t\t<el-button type=\"danger\" @click=\"clearAll()\">delAll(持久化存储)</el-button>\n\t\t\t<el-button type=\"danger\" @click=\"clearAll({ type: 'session' })\">delAll(session存储)</el-button>\n\t\t</div>\n\t</basic-container>\n</template>\n\n<script lang=\"ts\" setup name=\"store\">\nimport { setStore, getStore, removeStore, clearStore, getAllStore } from 'utils/store';\nimport { ElMessage } from 'element-plus';\n\nconst setItem = (params: { name?: string; value?: string; type?: string }) => {\n\tconst { name, value, type } = params;\n\tsetStore({\n\t\tname: name,\n\t\tcontent: value,\n\t\ttype: type\n\t});\n\tElMessage.success(`设置数据 ${name} = ${value}`);\n};\nconst getItem = (params: { name?: string; value?: string; type?: string }) => {\n\tconst { name, type } = params;\n\tconst content = getStore({\n\t\tname: name,\n\t\ttype: type\n\t});\n\tElMessage.success(`获取数据 ${name} = ${content}`);\n};\nconst delItem = (params: { name?: string; value?: string; type?: string }) => {\n\tconst { name, type } = params;\n\tremoveStore({ name, type });\n\tElMessage.success(`删除数据 ${name}`);\n};\nconst clearAll = (params = {}) => {\n\tclearStore(params);\n\tElMessage.success(`清除全部数据完成`);\n};\nconst getAll = (params = {}) => {\n\tconst list = getAllStore(params);\n\tconsole.log(list);\n\tElMessage.success(`结果已经打印到控制台`);\n};\n</script>\n\n<style lang=\"scss\">\n.title {\n\tmargin-bottom: 10px;\n}\n.box {\n\tmargin-bottom: 20px;\n}\n</style>\n"],"names":["keyName","website","key","setStore","params2","name","name2","content","content2","type","obj2","dataType","datetime","Date","getTime","window","sessionStorage","setItem","JSON","stringify","localStorage","getStore","params","debug","obj","getItem","validatenull","parse","Number","eval","removeStore","removeItem","getAllStore","list","i","length","push","clearStore","clear","value","ElementPlus","ElMessage","success","delItem","clearAll","getAll"],"mappings":"gEAGA,MAAMA,QAAUC,QAAQC,IAAM,IAIjBC,SAAYC,IACpB,IAAEC,KAAMC,EAAAC,QAAAC,OAASC,GAASL,EAC9BE,EAAON,QAAUM,EACjB,IAAII,EAAM,CACTC,gBAAiBH,EACjBD,QAASC,EACTC,KAAAA,EACAG,UAAU,IAAIC,MAAOC,WAElBL,EAAMM,OAAOC,eAAeC,QAAQX,EAAMY,KAAKC,UAAUT,IACxDK,OAAOK,aAAaH,QAAQX,EAAMY,KAAKC,UAAUT,KAM1CW,SAAYC,SACpB,IAAAjB,KAAEA,WAAMkB,OAAUD,OACtBjB,KAAOL,QAAUK,KACb,IAAAmB,IAAM,GACTjB,QAGD,GAFMiB,IAAAT,OAAOC,eAAeS,QAAQpB,MAChCqB,aAAaF,OAAYA,IAAAT,OAAOK,aAAaK,QAAQpB,QACrDqB,aAAaF,KAAjB,CACI,IACGA,IAAAN,KAAKS,MAAMH,KAChB,MACM,OAAAA,IAER,OAAID,MACIC,KAEY,UAAhBA,IAAIb,SACPJ,QAAUiB,IAAIjB,QACY,UAAhBiB,IAAIb,SACJJ,QAAAqB,OAAOJ,IAAIjB,SACK,WAAhBiB,IAAIb,SACJJ,QAAAsB,KAAKL,IAAIjB,SACO,UAAhBiB,IAAIb,WACdJ,QAAUiB,IAAIjB,SAERA,WAKKuB,YAAe1B,IACvB,IAAEC,YAAMI,GAASL,EACrBE,EAAON,QAAUM,EACbG,EACIM,OAAAC,eAAee,WAAWzB,GAE1BS,OAAAK,aAAaW,WAAWzB,IAOpB0B,YAAe5B,IAC3B,IAAI6B,EAAO,IACPxB,KAAEA,GAASL,EACf,GAAIK,EACH,IAAA,IAASyB,EAAI,EAAGA,GAAKnB,OAAOC,eAAemB,OAAQD,IAClDD,EAAKG,KAAK,CACT/B,KAAMU,OAAOC,eAAed,IAAIgC,GAChC3B,QAASc,SAAS,CACjBhB,KAAMU,OAAOC,eAAed,IAAIgC,IAAM,GACtCzB,KAAM,mBAKT,IAAA,IAASyB,EAAI,EAAGA,GAAKnB,OAAOK,aAAae,OAAQD,IAChDD,EAAKG,KAAK,CACT/B,KAAMU,OAAOK,aAAalB,IAAIgC,GAC9B3B,QAASc,SAAS,CACjBhB,KAAMU,OAAOK,aAAalB,IAAIgC,IAAM,OAKjC,OAAAD,GAMKI,WAAcjC,IAC1B,IAAIK,KAAEA,GAASL,EACXK,EACHM,OAAOC,eAAesB,QAEtBvB,OAAOK,aAAakB,qgCCnEtB,MAAArB,EAAAb,IACA,MAAAC,KAAAC,EAAAiC,MAAAA,EAAA9B,KAAAA,GAAAL,EACAD,SAAA,CAAAE,KAAAC,EACAC,QAAAgC,EACA9B,KAAAA,IAGA+B,YAAAC,UAAAC,QAAA,QAAApC,OAAAiC,MAEAd,EAAArB,IACA,MAAAC,YAAAI,GAAAL,EACAI,EAAAa,SAAA,CAAAhB,KAAAC,EACAG,KAAAA,IAGA+B,YAAAC,UAAAC,QAAA,QAAApC,OAAAE,MAEAmC,EAAAvC,IACA,MAAAC,YAAAI,GAAAL,EACA0B,YAAA,CAAAzB,KAAAC,EAAAG,KAAAA,IACA+B,YAAAC,UAAAC,QAAA,QAAApC,MAEAsC,EAAA,CAAAxC,EAAA,MACAiC,WAAAjC,GACAoC,YAAAC,UAAAC,QAAA,aAEAG,EAAA,CAAAzC,EAAA,MACA4B,YAAA5B,GAEAoC,YAAAC,UAAAC,QAAA"}