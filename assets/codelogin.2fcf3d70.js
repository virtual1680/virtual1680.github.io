import{H as y,r as v,a0 as w,e as b,a4 as d,k as E,O as k,P as t,u as i,X as r,a7 as S,m as _,W as h,J as K,$ as N,V as $}from"./vue.e587a6e4.js";import{c as B,i as C}from"./index.308dce99.js";import"./element-plus.99fc94f8.js";const F=_("i",{class:"icon-shouji"},null,-1),U=_("i",{class:"icon-yanzhengma"},null,-1),z=y({name:"CodeLogin"}),j=y({...z,setup(q){const g=B(),M=(e,o,l)=>{C(o)[0]?l(new Error(C(o)[1].toString())):l()},x=(e,o,l)=>{o.length!=4?l(new Error("\u8BF7\u8F93\u51654\u4F4D\u6570\u7684\u9A8C\u8BC1\u7801")):l()},u=v(""),n=v(0),c=v(!1);let a=w({phone:"",code:""});const I={phone:[{required:!0,trigger:"blur",validator:M}],code:[{required:!0,trigger:"blur",validator:x}]},s=b(()=>({MSGINIT:g.$t("login.msgText"),MSGSCUCCESS:g.$t("login.msgSuccess"),MSGTIME:60}));u.value=s.value.MSGINIT,n.value=s.value.MSGTIME;const T=()=>{if(c.value)return;u.value=n.value+s.value.MSGSCUCCESS,c.value=!0;const e=setInterval(()=>{n.value--,u.value=n.value+s.value.MSGSCUCCESS,n.value==0&&(n.value=s.value.MSGTIME,u.value=s.value.MSGINIT,c.value=!1,clearInterval(e))},1e3)},p=async e=>{!e||await e.validate(o=>{})};return(e,o)=>{const l=d("el-input"),m=d("el-form-item"),V=d("el-button"),G=d("el-form");return E(),k(G,{class:"login-form","status-icon":"",rules:I,ref_key:"loginForm",ref:a,model:i(a),"label-width":"0"},{default:t(()=>[r(m,{prop:"phone"},{default:t(()=>[r(l,{onKeyup:S(p,["enter"]),modelValue:i(a).phone,"onUpdate:modelValue":o[0]||(o[0]=f=>i(a).phone=f),"auto-complete":"off",placeholder:e.$t("login.phone")},{prefix:t(()=>[F]),_:1},8,["onKeyup","modelValue","placeholder"])]),_:1}),r(m,{prop:"code"},{default:t(()=>[r(l,{onKeyup:S(p,["enter"]),modelValue:i(a).code,"onUpdate:modelValue":o[1]||(o[1]=f=>i(a).code=f),"auto-complete":"off",placeholder:e.$t("login.code")},{prefix:t(()=>[U]),append:t(()=>[_("span",{onClick:T,class:K(["msg-text",[{display:c.value}]])},h(u.value),3)]),_:1},8,["onKeyup","modelValue","placeholder"])]),_:1}),r(m,null,{default:t(()=>[r(V,{type:"primary",onClick:N(p,["prevent"]),class:"login-submit"},{default:t(()=>[$(h(e.$t("login.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])}}});export{j as default};
//# sourceMappingURL=codelogin.2fcf3d70.js.map
