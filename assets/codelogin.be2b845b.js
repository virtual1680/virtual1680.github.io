import{i as e}from"./index.9ee08915.js";const o=Vue.createElementVNode("i",{class:"icon-shouji"},null,-1),u=Vue.createElementVNode("i",{class:"icon-yanzhengma"},null,-1),l=Vue.defineComponent({name:"CodeLogin"}),t=Vue.defineComponent({...l,setup(l){const t=VueI18n.useI18n(),a=Vue.ref(""),n=Vue.ref(0),r=Vue.ref(!1);let i=Vue.reactive({phone:"",code:""});const V={phone:[{required:!0,trigger:"blur",validator:(o,u,l)=>{e(u)[0]?l(new Error(e(u)[1].toString())):l()}}],code:[{required:!0,trigger:"blur",validator:(e,o,u)=>{4!=o.length?u(new Error("请输入4位数的验证码")):u()}}]},d=Vue.computed((()=>({MSGINIT:t.t("login.msgText"),MSGSCUCCESS:t.t("login.msgSuccess"),MSGTIME:60})));a.value=d.value.MSGINIT,n.value=d.value.MSGTIME;const c=()=>{if(r.value)return;a.value=n.value+d.value.MSGSCUCCESS,r.value=!0;const e=setInterval((()=>{n.value--,a.value=n.value+d.value.MSGSCUCCESS,0==n.value&&(n.value=d.value.MSGTIME,a.value=d.value.MSGINIT,r.value=!1,clearInterval(e))}),1e3)},s=async e=>{e&&await e.validate((e=>{}))};return(e,l)=>{const t=Vue.resolveComponent("el-input"),n=Vue.resolveComponent("el-form-item"),d=Vue.resolveComponent("el-button"),p=Vue.resolveComponent("el-form");return Vue.openBlock(),Vue.createBlock(p,{class:"login-form","status-icon":"",rules:V,ref_key:"loginForm",ref:i,model:Vue.unref(i),"label-width":"0"},{default:Vue.withCtx((()=>[Vue.createVNode(n,{prop:"phone"},{default:Vue.withCtx((()=>[Vue.createVNode(t,{onKeyup:Vue.withKeys(s,["enter"]),modelValue:Vue.unref(i).phone,"onUpdate:modelValue":l[0]||(l[0]=e=>Vue.unref(i).phone=e),"auto-complete":"off",placeholder:e.$t("login.phone")},{prefix:Vue.withCtx((()=>[o])),_:1},8,["onKeyup","modelValue","placeholder"])])),_:1}),Vue.createVNode(n,{prop:"code"},{default:Vue.withCtx((()=>[Vue.createVNode(t,{onKeyup:Vue.withKeys(s,["enter"]),modelValue:Vue.unref(i).code,"onUpdate:modelValue":l[1]||(l[1]=e=>Vue.unref(i).code=e),"auto-complete":"off",placeholder:e.$t("login.code")},{prefix:Vue.withCtx((()=>[u])),append:Vue.withCtx((()=>[Vue.createElementVNode("span",{onClick:c,class:Vue.normalizeClass(["msg-text",[{display:r.value}]])},Vue.toDisplayString(a.value),3)])),_:1},8,["onKeyup","modelValue","placeholder"])])),_:1}),Vue.createVNode(n,null,{default:Vue.withCtx((()=>[Vue.createVNode(d,{type:"primary",onClick:Vue.withModifiers(s,["prevent"]),class:"login-submit"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.$t("login.submit")),1)])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])}}});export{t as default};
//# sourceMappingURL=codelogin.be2b845b.js.map
