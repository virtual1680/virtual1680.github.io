{"version":3,"file":"store.89cc28ab.js","sources":["../../src/utils/store.ts","../../src/views/util/store.vue"],"sourcesContent":["import { validatenull } from 'utils/validate';\nimport website from '@/config/website';\n\nconst keyName = website.key + '-';\n/**\n * 存储localStorage\n */\nexport const setStore = (params: { name?: string; content?: string; type?: string }) => {\n\tlet { name, content, type } = params;\n\tname = keyName + name;\n\tlet obj = {\n\t\tdataType: typeof content,\n\t\tcontent: content,\n\t\ttype: type,\n\t\tdatetime: new Date().getTime()\n\t};\n\tif (type) window.sessionStorage.setItem(name, JSON.stringify(obj));\n\telse window.localStorage.setItem(name, JSON.stringify(obj));\n};\n/**\n * 获取localStorage\n */\n\nexport const getStore = (params: { name?: string; debug?: string; type?: string }) => {\n\tlet { name, debug } = params;\n\tname = keyName + name;\n\tlet obj = {} as any,\n\t\tcontent;\n\tobj = window.sessionStorage.getItem(name);\n\tif (validatenull(obj)) obj = window.localStorage.getItem(name);\n\tif (validatenull(obj)) return;\n\ttry {\n\t\tobj = JSON.parse(obj);\n\t} catch {\n\t\treturn obj;\n\t}\n\tif (debug) {\n\t\treturn obj;\n\t}\n\tif (obj.dataType == 'string') {\n\t\tcontent = obj.content;\n\t} else if (obj.dataType == 'number') {\n\t\tcontent = Number(obj.content);\n\t} else if (obj.dataType == 'boolean') {\n\t\tcontent = eval(obj.content);\n\t} else if (obj.dataType == 'object') {\n\t\tcontent = obj.content;\n\t}\n\treturn content;\n};\n/**\n * 删除localStorage\n */\nexport const removeStore = (params: { name?: string; debug?: string; type?: string }) => {\n\tlet { name, type } = params;\n\tname = keyName + name;\n\tif (type) {\n\t\twindow.sessionStorage.removeItem(name);\n\t} else {\n\t\twindow.localStorage.removeItem(name);\n\t}\n};\n\n/**\n * 获取全部localStorage\n */\nexport const getAllStore = (params: { name?: string; debug?: string; type?: string }) => {\n\tlet list = [];\n\tlet { type } = params;\n\tif (type) {\n\t\tfor (let i = 0; i <= window.sessionStorage.length; i++) {\n\t\t\tlist.push({\n\t\t\t\tname: window.sessionStorage.key(i),\n\t\t\t\tcontent: getStore({\n\t\t\t\t\tname: window.sessionStorage.key(i) || '',\n\t\t\t\t\ttype: 'session'\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t} else {\n\t\tfor (let i = 0; i <= window.localStorage.length; i++) {\n\t\t\tlist.push({\n\t\t\t\tname: window.localStorage.key(i),\n\t\t\t\tcontent: getStore({\n\t\t\t\t\tname: window.localStorage.key(i) || ''\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t}\n\treturn list;\n};\n\n/**\n * 清空全部localStorage\n */\nexport const clearStore = (params: { name?: string; debug?: string; type?: string }) => {\n\tlet { type } = params;\n\tif (type) {\n\t\twindow.sessionStorage.clear();\n\t} else {\n\t\twindow.localStorage.clear();\n\t}\n};\n","<template>\n\t<basic-container>\n\t\t<h3>存储</h3>\n\t\t<el-tag class=\"title\">基本读写删(持久化存储)</el-tag>\n\t\t<div class=\"box\">\n\t\t\t<el-button type=\"primary\" @click=\"setItem({ name: 'username', value: 'avue' })\">set('username', 'avue')</el-button>\n\n\t\t\t<el-button type=\"success\" @click=\"getItem({ name: 'username' })\">get('username')</el-button>\n\n\t\t\t<el-button type=\"danger\" @click=\"delItem({ name: 'username' })\">remove('username')</el-button>\n\t\t</div>\n\t\t<el-tag class=\"title\">设置session(session存储)</el-tag>\n\t\t<div class=\"box\">\n\t\t\t<el-button type=\"primary\" @click=\"setItem({ name: 'username', value: 'avue', type: 'session' })\">set('username', 'avue')</el-button>\n\n\t\t\t<el-button type=\"success\" @click=\"getItem({ name: 'username', type: 'session' })\">get('username')</el-button>\n\n\t\t\t<el-button type=\"danger\" @click=\"delItem({ name: 'username', type: 'session' })\">remove('username')</el-button>\n\t\t</div>\n\t\t<el-tag class=\"title\">获取所有可以获得的数据</el-tag>\n\t\t<div class=\"box\">\n\t\t\t<el-button type=\"success\" @click=\"getAll()\">getAll(持久化存储)</el-button>\n\t\t\t<el-button type=\"success\" @click=\"getAll({ type: 'session' })\">getAll(session存储)</el-button>\n\t\t\t<el-button type=\"danger\" @click=\"clearAll()\">delAll(持久化存储)</el-button>\n\t\t\t<el-button type=\"danger\" @click=\"clearAll({ type: 'session' })\">delAll(session存储)</el-button>\n\t\t</div>\n\t</basic-container>\n</template>\n\n<script lang=\"ts\" setup name=\"store\">\nimport { setStore, getStore, removeStore, clearStore, getAllStore } from 'utils/store';\nimport { ElMessage } from 'element-plus';\n\nconst setItem = (params: { name?: string; value?: string; type?: string }) => {\n\tconst { name, value, type } = params;\n\tsetStore({\n\t\tname: name,\n\t\tcontent: value,\n\t\ttype: type\n\t});\n\tElMessage.success(`设置数据 ${name} = ${value}`);\n};\nconst getItem = (params: { name?: string; value?: string; type?: string }) => {\n\tconst { name, type } = params;\n\tconst content = getStore({\n\t\tname: name,\n\t\ttype: type\n\t});\n\tElMessage.success(`获取数据 ${name} = ${content}`);\n};\nconst delItem = (params: { name?: string; value?: string; type?: string }) => {\n\tconst { name, type } = params;\n\tremoveStore({ name, type });\n\tElMessage.success(`删除数据 ${name}`);\n};\nconst clearAll = (params = {}) => {\n\tclearStore(params);\n\tElMessage.success(`清除全部数据完成`);\n};\nconst getAll = (params = {}) => {\n\tconst list = getAllStore(params);\n\tconsole.log(list);\n\tElMessage.success(`结果已经打印到控制台`);\n};\n</script>\n\n<style lang=\"scss\">\n.title {\n\tmargin-bottom: 10px;\n}\n.box {\n\tmargin-bottom: 20px;\n}\n</style>\n"],"names":[],"mappings":"0SAGA,KAAM,SAAU,QAAQ,IAAM,IAIjB,SAAW,AAAC,GAA+D,CACnF,GAAA,CAAE,KAAM,EAAA,QAAA,EAAS,QAAS,EAC9B,EAAO,QAAU,EACjB,GAAI,GAAM,CACT,SAAU,MAAO,GACjB,QAAS,EACT,OACA,SAAU,GAAI,MAAK,EAAE,QAAQ,CAAA,EAE1B,AAAA,EAAM,OAAO,eAAe,QAAQ,EAAM,KAAK,UAAU,CAAG,CAAC,EAC5D,OAAO,aAAa,QAAQ,EAAM,KAAK,UAAU,CAAG,CAAC,CAC3D,EAKa,SAAW,AAAC,QAA6D,CACjF,GAAA,CAAE,KAAM,OAAU,OACtB,KAAO,QAAU,KACb,GAAA,KAAM,CACT,EAAA,QAGD,GAFM,IAAA,OAAO,eAAe,QAAQ,IAAI,EACpC,aAAa,GAAG,GAAS,KAAA,OAAO,aAAa,QAAQ,IAAI,GACzD,cAAa,GAAG,EAChB,IAAA,CACG,IAAA,KAAK,MAAM,GAAG,CAAA,MACnB,CACM,MAAA,IACR,CACA,MAAI,OACI,IAEJ,CAAA,IAAI,UAAY,SACnB,QAAU,IAAI,QACf,AAAW,IAAI,UAAY,SAChB,QAAA,OAAO,IAAI,OAAO,EAC7B,AAAW,IAAI,UAAY,UAChB,QAAA,KAAK,IAAI,OAAO,EAChB,IAAI,UAAY,UAC1B,SAAU,IAAI,SAER,SACR,EAIa,YAAc,AAAC,GAA6D,CACpF,GAAA,CAAE,OAAM,QAAS,EACrB,EAAO,QAAU,EACjB,AAAI,EACI,OAAA,eAAe,WAAW,CAAI,EAE9B,OAAA,aAAa,WAAW,CAAI,CAErC,EAKa,YAAc,AAAC,GAA6D,CACxF,GAAI,GAAO,CAAA,EACP,CAAE,QAAS,EACf,GAAI,EACH,OAAS,GAAI,EAAG,GAAK,OAAO,eAAe,OAAQ,IAClD,EAAK,KAAK,CACT,KAAM,OAAO,eAAe,IAAI,CAAC,EACjC,QAAS,SAAS,CACjB,KAAM,OAAO,eAAe,IAAI,CAAC,GAAK,GACtC,KAAM,SAAA,CACN,CAAA,CACD,MAGF,QAAS,GAAI,EAAG,GAAK,OAAO,aAAa,OAAQ,IAChD,EAAK,KAAK,CACT,KAAM,OAAO,aAAa,IAAI,CAAC,EAC/B,QAAS,SAAS,CACjB,KAAM,OAAO,aAAa,IAAI,CAAC,GAAK,EAAA,CACpC,CAAA,CACD,EAGI,MAAA,EACR,EAKa,WAAa,AAAC,GAA6D,CACvF,GAAI,CAAE,QAAS,EACf,AAAI,EACH,OAAO,eAAe,QAEtB,OAAO,aAAa,OAEtB;kiCCrEA,KAAA,GAAA,AAAA,GAAA,CACA,KAAA,CAAA,OAAA,QAAA,QAAA,EACA,SAAA,CACA,OACA,QAAA,EACA,MAAA,CACA,EACA,UAAA,QAAA,4BAAA,OAAA,GAAA,CAAA,EAEA,EAAA,AAAA,GAAA,CACA,KAAA,CAAA,OAAA,QAAA,EACA,EAAA,SAAA,CACA,OACA,MAAA,CACA,EACA,UAAA,QAAA,4BAAA,OAAA,GAAA,CAAA,EAEA,EAAA,AAAA,GAAA,CACA,KAAA,CAAA,OAAA,QAAA,EACA,YAAA,CAAA,OAAA,MAAA,CAAA,EACA,UAAA,QAAA,4BAAA,GAAA,CAAA,EAEA,EAAA,CAAA,EAAA,KAAA,CACA,WAAA,CAAA,EACA,UAAA,QAAA,kDAAA,CAAA,EAEA,EAAA,CAAA,EAAA,KAAA,CACA,KAAA,GAAA,YAAA,CAAA,EAEA,UAAA,QAAA,8DAAA,CAAA"}