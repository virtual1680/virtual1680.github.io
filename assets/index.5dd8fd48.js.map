{"version":3,"file":"index.5dd8fd48.js","sources":["../../src/page/lock/index.vue"],"sourcesContent":["<template>\n\t<div class=\"login-container\" @keyup.enter=\"handleLogin\">\n\t\t<div class=\"login-time\">\n\t\t\t{{ time }}\n\t\t</div>\n\t\t<div class=\"login-weaper\">\n\t\t\t<div class=\"login-left animate__animated animate__fadeInLeft\">\n\t\t\t\t<img class=\"img\" src=\"/img/logo.png\" alt=\"\" />\n\t\t\t\t<p class=\"title\">{{ $t('login.info') }}</p>\n\t\t\t</div>\n\t\t\t<div class=\"login-border animate__animated animate__fadeInRight\">\n\t\t\t\t<div class=\"login-main\">\n\t\t\t\t\t<div class=\"lock-form animate__animated animate__bounceInDown\">\n\t\t\t\t\t\t<div class=\"animate__animated\" :class=\"{ shake: passwdError, animate__bounceOut: pass }\">\n\t\t\t\t\t\t\t<h3 style=\"color: #333333\">{{ userInfo.username }}</h3>\n\t\t\t\t\t\t\t<el-input placeholder=\"请输入登录密码\" type=\"password\" class=\"input-with-select animated\" v-model=\"passwd\" @keyup.enter=\"handleLogin\">\n\t\t\t\t\t\t\t\t<template #append>\n\t\t\t\t\t\t\t\t\t<i class=\"icon-bofangqi-suoping\" @click=\"handleLogin\"></i>\n\t\t\t\t\t\t\t\t\t&nbsp; &nbsp;\n\t\t\t\t\t\t\t\t\t<i class=\"icon-tuichu\" @click=\"handleLogout\"></i>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script lang=\"ts\" setup name=\"lock\">\nimport dayjs from 'dayjs';\nimport { ref, computed } from 'vue';\nimport { ElMessageBox, ElMessage } from 'element-plus';\nimport { useRouter } from 'vue-router';\nimport { useCommonStore, useUserStore, useTagsStore } from 'store/index';\n\nconst userStore = useUserStore();\nconst commonStore = useCommonStore();\nconst tagsStore = useTagsStore();\nconst router = useRouter();\nconst time = ref('');\nconst passwd = ref('');\nconst passwdError = ref(false);\nconst pass = ref(false);\n// ...mapState(['userInfo', 'tag', 'lockPasswd'])\n\nconst userInfo = computed(() => {\n\treturn userStore.getUserInfo;\n});\nconst lockPasswd = computed(() => {\n\treturn commonStore.getLockPasswd;\n});\nconst tag = computed(() => {\n\treturn tagsStore.getTag;\n});\n\nconst getTime = () => {\n\ttime.value = dayjs().format('YYYY年MM月DD日 HH:mm:ss');\n};\nconst handleLogout = () => {\n\tElMessageBox.confirm('是否退出系统, 是否继续?', '提示', {\n\t\tconfirmButtonText: '确定',\n\t\tcancelButtonText: '取消',\n\t\ttype: 'warning'\n\t}).then(() => {\n\t\tuserStore.LogOut().then(() => {\n\t\t\trouter.push({ path: '/login' });\n\t\t});\n\t});\n};\nconst handleLogin = () => {\n\tif (passwd.value != lockPasswd.value) {\n\t\tpasswd.value = '';\n\t\tElMessage.error({\n\t\t\tmessage: '解锁密码错误,请重新输入',\n\t\t\ttype: 'error'\n\t\t});\n\t\tpasswdError.value = true;\n\t\tsetTimeout(() => {\n\t\t\tpasswdError.value = false;\n\t\t}, 1000);\n\t\treturn;\n\t}\n\tpass.value = true;\n\tsetTimeout(() => {\n\t\tcommonStore.CLEAR_LOCK();\n\t\trouter.push({\n\t\t\tpath: tag.value.path\n\t\t});\n\t}, 1000);\n};\ngetTime();\nsetInterval(() => {\n\tgetTime();\n}, 1000);\n</script>\n\n<style lang=\"scss\"></style>\n"],"names":["userStore","useUserStore","commonStore","useCommonStore","tagsStore","useTagsStore","router","VueRouter","useRouter","time","Vue","passwd","passwdError","pass","userInfo","getUserInfo","lockPasswd","getLockPasswd","tag","getTag","getTime","value","dayjs","format","handleLogout","ElementPlus","ElMessageBox","confirm","confirmButtonText","cancelButtonText","type","then","LogOut","push","path","handleLogin","ElMessage","error","message","setTimeout","CLEAR_LOCK","setInterval"],"mappings":"olBAoCA,MAAAA,EAAAC,IACAC,EAAAC,IACAC,EAAAC,IACAC,EAAAC,UAAAC,YACAC,EAAAC,YACAC,EAAAD,YACAE,EAAAF,YACAG,EAAAH,YAGAI,EAAAJ,kBACAV,EAAAe,cAEAC,EAAAN,kBACAR,EAAAe,gBAEAC,EAAAR,kBACAN,EAAAe,SAGAC,EAAA,KACAX,EAAAY,MAAAC,IAAAC,OAAA,yBAEAC,EAAA,KACAC,YAAAC,aAAAC,QAAA,gBAAA,KAAA,CAAAC,kBAAA,KACAC,iBAAA,KACAC,KAAA,YACAC,MAAA,KAEA/B,EAAAgC,SAAAD,MAAA,KACAzB,EAAA2B,KAAA,CAAAC,KAAA,kBAIAC,EAAA,KACA,GAAAxB,EAAAU,OAAAL,EAAAK,MAUA,OATAV,EAAAU,MAAA,GACAI,YAAAW,UAAAC,MAAA,CAAAC,QAAA,eACAR,KAAA,UAGAlB,EAAAS,OAAA,OACAkB,YAAA,KACA3B,EAAAS,OAAA,IAAA,KAIAR,EAAAQ,OAAA,EACAkB,YAAA,KACArC,EAAAsC,aACAlC,EAAA2B,KAAA,CAAAC,KAAAhB,EAAAG,MAAAa,SAEA,iBAIAO,aAAA,WACA"}