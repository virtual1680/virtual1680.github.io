{"version":3,"file":"main.f74e6a35.js","sources":["../../src/components/iframe/main.vue"],"sourcesContent":["<template>\n\t<basic-container>\n\t\t<iframe :src=\"src\" class=\"iframe\" ref=\"iframe\" />\n\t</basic-container>\n</template>\n\n<script lang=\"ts\" setup name=\"AvueIframe\">\nimport NProgress from 'nprogress'; // progress bar\nimport 'nprogress/nprogress.css'; // progress bar style\nimport { computed, ref, Ref, watch } from 'vue';\nimport { useRoute } from 'vue-router';\nconst route = useRoute();\nconst iframe: Ref<HTMLIFrameElement | undefined> = ref();\nNProgress.configure({ showSpinner: false });\nconst src = computed(() => {\n\treturn (route.query.url as string).replace(/#/g, '&');\n});\n\nwatch(\n\t() => route.query,\n\t() => {\n\t\tload();\n\t}\n);\n\n// 显示等待框\nconst show = () => {\n\tNProgress.start();\n};\n// 隐藏等待狂\nconst hide = () => {\n\tNProgress.done();\n};\n// 加载组件\nconst load = () => {\n\tshow();\n\t//超时3s自动隐藏等待狂，加强用户体验\n\tlet time = 3;\n\tconst timeFunc = setInterval(() => {\n\t\ttime--;\n\t\tif (time == 0) {\n\t\t\thide();\n\t\t\tclearInterval(timeFunc);\n\t\t}\n\t}, 1000);\n\tiframeInit();\n};\n//iframe窗口初始化\nconst iframeInit = () => {\n\tconst clientHeight = document.documentElement.clientHeight - 150;\n\tif (!iframe.value) return;\n\tiframe.value.style.height = `${clientHeight}px`;\n\t// TODO\n\t// if (iframe.value.attachEvent) {\n\t// \tiframe.value.attachEvent('onload', () => {\n\t// \t\thide();\n\t// \t});\n\t// } else {\n\t// \tiframe.value.onload = () => {\n\t// \t\thide();\n\t// \t};\n\t// }\n\tiframe.value.onload = () => {\n\t\thide();\n\t};\n};\n\nload();\n</script>\n\n<style lang=\"scss\">\n.iframe {\n\tbox-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n\tborder: 0;\n}\n</style>\n"],"names":[],"mappings":"qPAWA,KAAA,GAAA,IACA,EAAA,IACA,EAAA,UAAA,CAAA,YAAA,EAAA,CAAA,EACA,KAAA,GAAA,EAAA,IACA,EAAA,MAAA,IAAA,QAAA,KAAA,GAAA,CACA,EAGA,EAAA,IAAA,EAAA,MACA,IAAA,CACA,GAAA,CAEA,EAGA,KAAA,GAAA,IAAA,CACA,EAAA,MAAA,CAAA,EAGA,EAAA,IAAA,CACA,EAAA,KAAA,CAAA,EAGA,EAAA,IAAA,CACA,IAEA,GAAA,GAAA,EACA,KAAA,GAAA,YAAA,IAAA,CACA,IACA,GAAA,GACA,KACA,cAAA,CAAA,IAEA,GAAA,EACA,GAAA,EAGA,EAAA,IAAA,CACA,KAAA,GAAA,SAAA,gBAAA,aAAA,IACA,AAAA,CAAA,EAAA,OACA,GAAA,MAAA,MAAA,OAAA,GAAA,MAWA,EAAA,MAAA,OAAA,IAAA,CACA,GAAA,EACA,EAGA"}