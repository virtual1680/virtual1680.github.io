{"version":3,"file":"index.fdd9c13c.js","sources":["../../src/page/lock/index.vue"],"sourcesContent":["<template>\r\n\t<div class=\"login-container\" @keyup.enter=\"handleLogin\">\r\n\t\t<div class=\"login-time\">\r\n\t\t\t{{ time }}\r\n\t\t</div>\r\n\t\t<div class=\"login-weaper\">\r\n\t\t\t<div class=\"login-left animate__animated animate__fadeInLeft\">\r\n\t\t\t\t<img class=\"img\" src=\"/img/logo.png\" alt=\"\" />\r\n\t\t\t\t<p class=\"title\">{{ $t('login.info') }}</p>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"login-border animate__animated animate__fadeInRight\">\r\n\t\t\t\t<div class=\"login-main\">\r\n\t\t\t\t\t<div class=\"lock-form animate__animated animate__bounceInDown\">\r\n\t\t\t\t\t\t<div class=\"animate__animated\" :class=\"{ shake: passwdError, animate__bounceOut: pass }\">\r\n\t\t\t\t\t\t\t<h3 style=\"color: #333333\">{{ userInfo.username }}</h3>\r\n\t\t\t\t\t\t\t<el-input placeholder=\"请输入登录密码\" type=\"password\" class=\"input-with-select animated\" v-model=\"passwd\" @keyup.enter=\"handleLogin\">\r\n\t\t\t\t\t\t\t\t<template #append>\r\n\t\t\t\t\t\t\t\t\t<i class=\"icon-bofangqi-suoping\" @click=\"handleLogin\"></i>\r\n\t\t\t\t\t\t\t\t\t&nbsp; &nbsp;\r\n\t\t\t\t\t\t\t\t\t<i class=\"icon-tuichu\" @click=\"handleLogout\"></i>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script lang=\"ts\" setup name=\"lock\">\r\nimport dayjs from 'dayjs';\r\nimport { ref, computed } from 'vue';\r\nimport { ElMessageBox, ElMessage } from 'element-plus';\r\nimport { useRouter } from 'vue-router';\r\nimport { useCommonStore, useUserStore, useTagsStore } from 'store/index';\r\n\r\nconst userStore = useUserStore();\r\nconst commonStore = useCommonStore();\r\nconst tagsStore = useTagsStore();\r\nconst router = useRouter();\r\nconst time = ref('');\r\nconst passwd = ref('');\r\nconst passwdError = ref(false);\r\nconst pass = ref(false);\r\n// ...mapState(['userInfo', 'tag', 'lockPasswd'])\r\n\r\nconst userInfo = computed(() => {\r\n\treturn userStore.getUserInfo;\r\n});\r\nconst lockPasswd = computed(() => {\r\n\treturn commonStore.getLockPasswd;\r\n});\r\nconst tag = computed(() => {\r\n\treturn tagsStore.getTag;\r\n});\r\n\r\nconst getTime = () => {\r\n\ttime.value = dayjs().format('YYYY年MM月DD日 HH:mm:ss');\r\n};\r\nconst handleLogout = () => {\r\n\tElMessageBox.confirm('是否退出系统, 是否继续?', '提示', {\r\n\t\tconfirmButtonText: '确定',\r\n\t\tcancelButtonText: '取消',\r\n\t\ttype: 'warning'\r\n\t}).then(() => {\r\n\t\tuserStore.LogOut().then(() => {\r\n\t\t\trouter.push({ path: '/login' });\r\n\t\t});\r\n\t});\r\n};\r\nconst handleLogin = () => {\r\n\tif (passwd.value != lockPasswd.value) {\r\n\t\tpasswd.value = '';\r\n\t\tElMessage.error({\r\n\t\t\tmessage: '解锁密码错误,请重新输入',\r\n\t\t\ttype: 'error'\r\n\t\t});\r\n\t\tpasswdError.value = true;\r\n\t\tsetTimeout(() => {\r\n\t\t\tpasswdError.value = false;\r\n\t\t}, 1000);\r\n\t\treturn;\r\n\t}\r\n\tpass.value = true;\r\n\tsetTimeout(() => {\r\n\t\tcommonStore.CLEAR_LOCK();\r\n\t\trouter.push({\r\n\t\t\tpath: tag.value.path\r\n\t\t});\r\n\t}, 1000);\r\n};\r\ngetTime();\r\nsetInterval(() => {\r\n\tgetTime();\r\n}, 1000);\r\n</script>\r\n\r\n<style lang=\"scss\"></style>\r\n"],"names":["userStore","useUserStore","commonStore","useCommonStore","tagsStore","useTagsStore","router","VueRouter","useRouter","time","Vue","passwd","passwdError","pass","userInfo","getUserInfo","lockPasswd","getLockPasswd","tag","getTag","getTime","value","dayjs","format","handleLogout","ElementPlus","ElMessageBox","confirm","confirmButtonText","cancelButtonText","type","then","LogOut","push","path","handleLogin","ElMessage","error","message","setTimeout","CLEAR_LOCK","setInterval"],"mappings":"olBAoCA,MAAAA,EAAAC,IACAC,EAAAC,IACAC,EAAAC,IACAC,EAAAC,UAAAC,YACAC,EAAAC,YACAC,EAAAD,YACAE,EAAAF,YACAG,EAAAH,YAGAI,EAAAJ,kBACAV,EAAAe,cAEAC,EAAAN,kBACAR,EAAAe,gBAEAC,EAAAR,kBACAN,EAAAe,SAGAC,EAAA,KACAX,EAAAY,MAAAC,IAAAC,OAAA,yBAEAC,EAAA,KACAC,YAAAC,aAAAC,QAAA,gBAAA,KAAA,CAAAC,kBAAA,KACAC,iBAAA,KACAC,KAAA,YACAC,MAAA,KAEA/B,EAAAgC,SAAAD,MAAA,KACAzB,EAAA2B,KAAA,CAAAC,KAAA,kBAIAC,EAAA,KACA,GAAAxB,EAAAU,OAAAL,EAAAK,MAUA,OATAV,EAAAU,MAAA,GACAI,YAAAW,UAAAC,MAAA,CAAAC,QAAA,eACAR,KAAA,UAGAlB,EAAAS,OAAA,OACAkB,YAAA,KACA3B,EAAAS,OAAA,IAAA,KAIAR,EAAAQ,OAAA,EACAkB,YAAA,KACArC,EAAAsC,aACAlC,EAAA2B,KAAA,CAAAC,KAAAhB,EAAAG,MAAAa,SAEA,iBAIAO,aAAA,WACA"}