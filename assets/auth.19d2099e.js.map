{"version":3,"file":"auth.19d2099e.js","sources":["../../src/api/auth.ts"],"sourcesContent":["import { RequestEnum } from 'app/enums/http';\r\nimport axios from 'http/axios';\r\n// import md5 from \"js-md5\";\r\n\r\nexport const info = (domain: string) => {\r\n\treturn axios.get('/blade-system/tenant/info', {\r\n\t\tdomain\r\n\t});\r\n};\r\ninterface LoginResult {\r\n\taccess_token: string;\r\n\tuser_id: string;\r\n}\r\n\r\n/**\r\n * 登录\r\n * @param tenantId\r\n * @param username\r\n * @param password\r\n * @param type\r\n * @param key\r\n * @param code\r\n */\r\nexport const login = (tenantId: string, username: string, password: string, type: string, key: string, code: string) => {\r\n\treturn axios.request<never, LoginResult>({\r\n\t\turl: '/blade-auth/oauth/token',\r\n\t\tmethod: RequestEnum.POST,\r\n\t\tparams: {\r\n\t\t\ttenantId,\r\n\t\t\tusername,\r\n\t\t\tpassword,\r\n\t\t\tgrant_type: 'captcha',\r\n\t\t\tscope: 'all',\r\n\t\t\ttype\r\n\t\t},\r\n\t\theaders: {\r\n\t\t\t'Tenant-Id': tenantId,\r\n\t\t\t'Captcha-Key': key,\r\n\t\t\t'Captcha-Code': code,\r\n\t\t\t'User-Type': 'web_admin'\r\n\t\t}\r\n\t});\r\n};\r\nexport const getExcel = (params: any) => {\r\n\treturn axios.request<never, any>({\r\n\t\turl: `/lecent-mall/report/export`,\r\n\t\tresponseType: 'arraybuffer',\r\n\t\tmethod: 'get',\r\n\t\tparams\r\n\t});\r\n};\r\n\r\n/**\r\n * 登录图片验证码\r\n * @returns\r\n */\r\ninterface ImageCode {\r\n\tkey: string;\r\n\timage: string;\r\n}\r\n// * 无 ResultData 包裹\r\nexport const GetCaptcha = () => axios.get<never, ImageCode>('/blade-auth/oauth/captcha');\r\n// * 有 ResultData 包裹\r\nexport const GetCaptcha1 = () =>\r\n\taxios.request<ImageCode>({\r\n\t\turl: '/blade-auth/oauth/captcha?111'\r\n\t});\r\n\r\n/**\r\n * 退出登录\r\n * @returns\r\n */\r\nexport const Logout = () => axios.get('/blade-auth/oauth/logout');\r\n\r\n/**\r\n * 刷新token\r\n * @param refresh_token\r\n * @param tenantId\r\n * @returns\r\n */\r\nexport const RefreshToken = (refresh_token: string) =>\r\n\taxios.post(\r\n\t\t'/blade-auth/oauth/token',\r\n\t\t{\r\n\t\t\ttenantId: '000000',\r\n\t\t\trefresh_token,\r\n\t\t\tgrant_type: 'refresh_token',\r\n\t\t\tscope: 'all'\r\n\t\t},\r\n\t\t{\r\n\t\t\theaders: {\r\n\t\t\t\t'Tenant-Id': '000000'\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n"],"names":["info","domain","axios","get","login","tenantId","username","password","type","key","code","request","url","method","RequestEnum","POST","params","grant_type","scope","headers","getExcel","responseType","GetCaptcha","GetCaptcha1","Logout","RefreshToken","refresh_token","post"],"mappings":"+CAIa,MAAAA,EAAQC,GACbC,EAAMC,IAAI,4BAA6B,CAC7CF,OAAAA,IAiBWG,EAAQ,CAACC,EAAkBC,EAAkBC,EAAkBC,EAAcC,EAAaC,IAC/FR,EAAMS,QAA4B,CACxCC,IAAK,0BACLC,OAAQC,EAAYC,KACpBC,OAAQ,CACPX,SAAAA,EACAC,SAAAA,EACAC,SAAAA,EACAU,WAAY,UACZC,MAAO,MACPV,KAAAA,GAEDW,QAAS,CACR,YAAad,EACb,cAAeI,EACf,eAAgBC,EAChB,YAAa,eAIHU,EAAYJ,GACjBd,EAAMS,QAAoB,CAChCC,IAAK,6BACLS,aAAc,cACdR,OAAQ,MACRG,OAAAA,IAaWM,EAAa,IAAMpB,EAAMC,IAAsB,6BAE/CoB,EAAc,IAC1BrB,EAAMS,QAAmB,CACxBC,IAAK,kCAOMY,EAAS,IAAMtB,EAAMC,IAAI,4BAQzBsB,EAAgBC,GAC5BxB,EAAMyB,KACL,0BACA,CACCtB,SAAU,SACVqB,cAAAA,EACAT,WAAY,gBACZC,MAAO,OAER,CACCC,QAAS,CACR,YAAa"}