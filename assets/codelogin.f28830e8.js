import{c as e,i as o}from"./index.889f4e9c.js";const u=Vue.createElementVNode("i",{class:"icon-shouji"},null,-1),l=Vue.createElementVNode("i",{class:"icon-yanzhengma"},null,-1),t=Vue.defineComponent({name:"CodeLogin"}),a=Vue.defineComponent({...t,setup(t){const a=e(),n=Vue.ref(""),r=Vue.ref(0),i=Vue.ref(!1);let V=Vue.reactive({phone:"",code:""});const c={phone:[{required:!0,trigger:"blur",validator:(e,u,l)=>{o(u)[0]?l(new Error(o(u)[1].toString())):l()}}],code:[{required:!0,trigger:"blur",validator:(e,o,u)=>{4!=o.length?u(new Error("请输入4位数的验证码")):u()}}]},d=Vue.computed((()=>({MSGINIT:a.$t("login.msgText"),MSGSCUCCESS:a.$t("login.msgSuccess"),MSGTIME:60})));n.value=d.value.MSGINIT,r.value=d.value.MSGTIME;const s=()=>{if(i.value)return;n.value=r.value+d.value.MSGSCUCCESS,i.value=!0;const e=setInterval((()=>{r.value--,n.value=r.value+d.value.MSGSCUCCESS,0==r.value&&(r.value=d.value.MSGTIME,n.value=d.value.MSGINIT,i.value=!1,clearInterval(e))}),1e3)},p=async e=>{e&&await e.validate((e=>{}))};return(e,o)=>{const t=Vue.resolveComponent("el-input"),a=Vue.resolveComponent("el-form-item"),r=Vue.resolveComponent("el-button"),d=Vue.resolveComponent("el-form");return Vue.openBlock(),Vue.createBlock(d,{class:"login-form","status-icon":"",rules:c,ref_key:"loginForm",ref:V,model:Vue.unref(V),"label-width":"0"},{default:Vue.withCtx((()=>[Vue.createVNode(a,{prop:"phone"},{default:Vue.withCtx((()=>[Vue.createVNode(t,{onKeyup:Vue.withKeys(p,["enter"]),modelValue:Vue.unref(V).phone,"onUpdate:modelValue":o[0]||(o[0]=e=>Vue.unref(V).phone=e),"auto-complete":"off",placeholder:e.$t("login.phone")},{prefix:Vue.withCtx((()=>[u])),_:1},8,["onKeyup","modelValue","placeholder"])])),_:1}),Vue.createVNode(a,{prop:"code"},{default:Vue.withCtx((()=>[Vue.createVNode(t,{onKeyup:Vue.withKeys(p,["enter"]),modelValue:Vue.unref(V).code,"onUpdate:modelValue":o[1]||(o[1]=e=>Vue.unref(V).code=e),"auto-complete":"off",placeholder:e.$t("login.code")},{prefix:Vue.withCtx((()=>[l])),append:Vue.withCtx((()=>[Vue.createElementVNode("span",{onClick:s,class:Vue.normalizeClass(["msg-text",[{display:i.value}]])},Vue.toDisplayString(n.value),3)])),_:1},8,["onKeyup","modelValue","placeholder"])])),_:1}),Vue.createVNode(a,null,{default:Vue.withCtx((()=>[Vue.createVNode(r,{type:"primary",onClick:Vue.withModifiers(p,["prevent"]),class:"login-submit"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.$t("login.submit")),1)])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])}}});export{a as default};
//# sourceMappingURL=codelogin.f28830e8.js.map
