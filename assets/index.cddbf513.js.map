{"version":3,"file":"index.cddbf513.js","sources":["../../src/mac/mode/index.ts","../../src/mac/index.vue"],"sourcesContent":["import MessageConstructor from './index.vue';\nimport { createVNode, render } from 'vue';\nexport default (function () {\n\treturn (opts = {}) => {\n\t\tlet options = {\n\t\t\tapp: opts\n\t\t};\n\t\tconst parent = document.createElement('div');\n\t\tlet instance = createVNode(MessageConstructor, options);\n\t\tinstance.props!.onDestroy = () => {\n\t\t\trender(null, parent);\n\t\t};\n\t\trender(instance, parent);\n\t\tdocument.body.appendChild(parent.firstElementChild!);\n\t\treturn instance;\n\t};\n})();\n","<template>\n\t<div class=\"mac_bg\"></div>\n\t<div class=\"desktop\">\n\t\t<div class=\"top\">\n\t\t\t<el-dropdown trigger=\"click\">\n\t\t\t\t<div class=\"logo\"><i class=\"iconfont icon-pingguo\"></i></div>\n\t\t\t\t<template #dropdown>\n\t\t\t\t\t<el-dropdown-menu>\n\t\t\t\t\t\t<el-dropdown-item>\n\t\t\t\t\t\t\t<div>{{ userInfo.username }}</div>\n\t\t\t\t\t\t</el-dropdown-item>\n\t\t\t\t\t\t<el-dropdown-item>\n\t\t\t\t\t\t\t<top-lock text=\"锁定屏幕\"></top-lock>\n\t\t\t\t\t\t</el-dropdown-item>\n\t\t\t\t\t\t<el-dropdown-item>\n\t\t\t\t\t\t\t<div @click=\"switchTheme\">退出主题</div>\n\t\t\t\t\t\t</el-dropdown-item>\n\t\t\t\t\t\t<el-dropdown-item @click=\"logout\">{{ $t('navbar.logOut') }}</el-dropdown-item>\n\t\t\t\t\t</el-dropdown-menu>\n\t\t\t\t</template>\n\t\t\t</el-dropdown>\n\t\t\t<div class=\"space\"></div>\n\t\t\t<div class=\"status\">\n\t\t\t\t<div class=\"audio\"><i class=\"iconfont icon-changyongtubiao-xianxingdaochu-zhuanqu-39\"></i></div>\n\t\t\t\t<div class=\"datetime\">{{ timeString }}</div>\n\t\t\t\t<div class=\"notification\"><i class=\"iconfont icon-changyongtubiao-xianxingdaochu-zhuanqu-25\"></i></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"body\">\n\t\t\t<div class=\"desktop-app\">\n\t\t\t\t<template v-for=\"item in deskTopAppList\" :key=\"item.key\">\n\t\t\t\t\t<div class=\"app-item\" @click=\"openApp(item)\" v-if=\"!item.hideInDesktop\">\n\t\t\t\t\t\t<div class=\"icon\" :style=\"{ backgroundColor: item.iconBgColor, color: item.iconColor }\">\n\t\t\t\t\t\t\t<i class=\"iconfont\" :class=\"item[iconKey]\"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"title\">{{ item[labelKey] }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"footer\">\n\t\t\t<div class=\"space\"></div>\n\t\t\t<div class=\"dock\">\n\t\t\t\t<template v-for=\"item in openAppList\" :key=\"item.key\">\n\t\t\t\t\t<div class=\"item\" @click=\"openApp(item)\">\n\t\t\t\t\t\t<i :style=\"{ backgroundColor: item.iconBgColor, color: item.iconColor }\" class=\"iconfont\" :class=\"item[iconKey]\"></i>\n\t\t\t\t\t\t<small style=\"margin-top: 5px; font-size: 10px\">{{ item[labelKey] }}</small>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<div class=\"space\"></div>\n\t\t</div>\n\t</div>\n</template>\n<script lang=\"ts\" setup>\nimport $Mode from './mode/index';\n// import index from '@/mixins/index';\nimport topLock from '@/page/index/top/top-lock.vue';\nimport { computed, ref } from 'vue';\nimport website from '@/config/website';\nimport { useCommonStore, useUserStore } from '@/store';\nimport dayjs from 'dayjs';\nimport { useRouter } from 'vue-router';\n// mixins: [index],\nconst router = useRouter();\nconst userStore = useUserStore();\n// const tagsStore = useTagsStore();\nconst commonStore = useCommonStore();\n// const app = ref(false);\nconst timeString = ref('');\n\n// const isMacOs = computed(() => {\n// \treturn commonStore.getIsMacOs;\n// });\n// const tagList = computed(() => {\n// \treturn tagsStore.getTagList;\n// });\n// const tag = computed(() => {\n// \treturn tagsStore.getTag;\n// });\nconst userInfo = computed(() => {\n\treturn userStore.getUserInfo;\n});\nconst menu = computed(() => {\n\treturn userStore.getMenu;\n});\nconst labelKey = computed(() => {\n\treturn website.menu.label;\n});\nconst openAppList = computed(() => {\n\treturn [] as RouterMenu[];\n});\n\nconst deskTopAppList = computed(() => {\n\treturn menuList.value;\n});\nconst menuList = computed(() => {\n\tlet result: RouterMenu[] = [];\n\tconst findMenu = (list: RouterMenu[]) => {\n\t\tlist.forEach(ele => {\n\t\t\tif (ele[childrenKey.value] && ele[childrenKey.value].length !== 0) {\n\t\t\t\tfindMenu(ele[childrenKey.value]);\n\t\t\t} else {\n\t\t\t\tresult.push(ele);\n\t\t\t}\n\t\t});\n\t};\n\tfindMenu(menu.value);\n\treturn result;\n});\nconst iconKey = computed(() => {\n\treturn website.menu.icon;\n});\n// const queryKey = computed(() => {\n// \treturn website.menu.query;\n// });\nconst childrenKey = computed(() => {\n\treturn website.menu.children;\n});\nconst hrefKey = computed(() => {\n\treturn website.menu.href;\n});\nconst pathKey = computed(() => {\n\treturn website.menu.path;\n});\nconst switchTheme = () => {\n\tcommonStore.SET_THEME_NAME('');\n\tlocation.reload();\n};\nconst logout = () => {\n\tuserStore.LogOut().then(() => {\n\t\trouter.push({ path: '/login' });\n\t});\n};\nconst startTimer = () => {\n\tsetInterval(() => {\n\t\ttimeString.value = dayjs().format('YYYY年MM月DD日 HH:mm');\n\t}, 1000);\n};\nconst openApp = (item: RouterMenu) => {\n\t$Mode({\n\t\ttitle: item[labelKey.value],\n\t\tpath: item[hrefKey.value] ? item[hrefKey.value] : item[pathKey.value]\n\t});\n};\nstartTimer();\nuserStore.GetMenu();\n</script>\n<style>\n.top .el-dropdown {\n\theight: 100% !important;\n\tcolor: white !important;\n}\n</style>\n<style scoped>\n.desktop {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tleft: 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n\tcolor: white;\n\ttext-shadow: 0 2px 2px rgb(0 0 0 / 10%);\n}\n.top {\n\tz-index: 100;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n\theight: 28px;\n\tpadding: 0 5px;\n\tfont-size: 14px;\n\tbackground-color: rgb(0 0 0 / 30%);\n\tbackdrop-filter: blur(20px);\n}\n.space {\n\tflex-grow: 1;\n}\n.logo {\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\theight: 100%;\n\tpadding: 0 15px;\n\tcursor: pointer;\n}\n.logo .el-select {\n\tposition: absolute;\n\topacity: 0;\n}\n.logo:hover {\n\tbackground-color: rgb(255 255 255 / 10%);\n}\n.logo .iconfont {\n\tmargin-top: -3px;\n\tfont-size: 16px;\n}\n.menu .item:hover {\n\tbackground-color: rgb(255 255 255 / 10%);\n}\n.status {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n\theight: 100%;\n}\n.audio .iconfont,\n.notification .iconfont {\n\tfont-size: 20px;\n}\n.datetime,\n.audio,\n.notification {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\theight: 100%;\n\tpadding: 0 10px;\n\ttext-align: center;\n\tcursor: pointer;\n}\n.datetime:hover,\n.audio:hover,\n.notification:hover {\n\tbackground-color: rgb(255 255 255 / 10%);\n}\n.body {\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-grow: 1;\n\talign-items: center;\n\tjustify-content: center;\n}\n.footer {\n\tposition: fixed;\n\tright: 5px;\n\tbottom: 5px;\n\tleft: 5px;\n\tz-index: 100;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n}\n.footer .dock {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 2px;\n\tbackground-color: rgb(255 255 255 / 10%);\n\tborder: 1px solid rgb(255 255 255 / 10%);\n\tborder-radius: 10px;\n\tbox-shadow: 0 0 10px rgb(0 0 0 / 20%);\n\tbackdrop-filter: blur(20px);\n}\n.dock .item {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 3px;\n}\n.dock .dot {\n\tposition: absolute;\n\tbottom: 0;\n\tdisplay: inline-block;\n\twidth: 3px;\n\theight: 3px;\n\tfont-size: 0;\n\tbackground: rgb(0 0 0 / 80%);\n\tborder-radius: 5px;\n}\n.dock .item .iconfont {\n\tdisplay: inline-block;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 30px;\n\theight: 30px;\n\tpadding: 2px;\n\tfont-size: 24px;\n\ttext-align: center;\n\tcursor: pointer;\n\tbackground-color: rgb(255 255 255 / 10%);\n\tborder-radius: 20px;\n\tborder-radius: 10px;\n\ttransition: transform 0.3s, margin 0.3s;\n}\n.dock .item:hover .iconfont {\n\tmargin: 0 15px;\n\tbox-shadow: 0 0 10px rgb(0 0 0 / 30%);\n\ttransform: scale(2) translateY(-10px);\n}\n.dock .nearby .iconfont {\n\tmargin: 0 12px;\n\tbox-shadow: 0 0 10px rgb(0 0 0 / 30%);\n\ttransform: scale(1.6) translateY(-8px);\n}\n.dock .nearby1 .iconfont {\n\tmargin: 0 9px;\n\tbox-shadow: 0 0 10px rgb(0 0 0 / 30%);\n\ttransform: scale(1.2) translateY(-6px);\n}\n.dock .nearby2 .iconfont {\n\tmargin: 0 7px;\n\tbox-shadow: 0 0 10px rgb(0 0 0 / 30%);\n\ttransform: scale(1.1) translateY(-5px);\n}\n.desktop-app {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tdisplay: flex;\n\tflex-flow: column wrap-reverse;\n\talign-items: flex-end;\n\tjustify-content: flex-start;\n\tpadding: 20px;\n}\n.app-item {\n\tflex-direction: column;\n\tpadding: 5px;\n\tmargin: 5px 10px;\n\ttext-align: center;\n\ttext-shadow: 0 0 2px rgb(0 0 0 / 50%);\n\tcursor: pointer;\n\tborder: 2px solid transparent;\n\tborder-radius: 10px;\n}\n.app-item .icon {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 50px;\n\theight: 50px;\n\tborder-radius: 10px;\n}\n.app-item .iconfont {\n\tfont-size: 36px;\n}\n.app-item .title {\n\twidth: 50px;\n\tmargin-top: 5px;\n\toverflow: hidden;\n\tfont-size: 12px;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n.app-item:hover {\n\tborder: 2px solid rgb(255 255 255 / 50%);\n}\n</style>\n"],"names":["$Mode","opts","options","app","parent","document","createElement","instance","Vue","createVNode","MessageConstructor","props","onDestroy","render","body","appendChild","firstElementChild","router","VueRouter","useRouter","userStore","useUserStore","commonStore","useCommonStore","timeString","userInfo","getUserInfo","menu","getMenu","labelKey","website","label","openAppList","deskTopAppList","menuList","value","result","findMenu","list","forEach","ele","childrenKey","length","push","iconKey","icon","children","hrefKey","href","pathKey","path","switchTheme","SET_THEME_NAME","location","reload","logout","LogOut","then","openApp","item","title","setInterval","dayjs","format","GetMenu"],"mappings":"8GAEA,IAAAA,EACC,CAAAC,EAAA,MACC,IAAAC,EAAA,CAAcC,IAAAF,GAGd,MAAAG,EAAAC,SAAAC,cAAA,OACA,IAAAC,EAAeC,IAAYC,YAAAC,EAAAR,GAM3B,OALAK,EAAAI,MAAAC,UAAA,KACCJ,IAAAK,OAAA,KAAAT,IAEDI,IAAAK,OAAAN,EAAAH,GACAC,SAAAS,KAAAC,YAAAX,EAAAY,mBACAT,ujCCkDF,MAAAU,EAAAC,UAAAC,YACAC,EAAAC,IAEAC,EAAAC,IAEAC,EAAAhB,YAWAiB,EAAAjB,kBACAY,EAAAM,cAEAC,EAAAnB,kBACAY,EAAAQ,UAEAC,EAAArB,kBACAsB,EAAAH,KAAAI,QAEAC,EAAAxB,kBACA,KAGAyB,EAAAzB,kBACA0B,EAAAC,QAEAD,EAAA1B,mBACA,IAAA4B,EAAA,GACA,MAAAC,EAAAC,IACAA,EAAAC,SAAAC,IACAA,EAAAC,EAAAN,QAAA,IAAAK,EAAAC,EAAAN,OAAAO,OACAL,EAAAG,EAAAC,EAAAN,QAEAC,EAAAO,KAAAH,OAKA,OADAH,EAAAV,EAAAQ,OACAC,KAEAQ,EAAApC,kBACAsB,EAAAH,KAAAkB,OAKAJ,EAAAjC,kBACAsB,EAAAH,KAAAmB,WAEAC,EAAAvC,kBACAsB,EAAAH,KAAAqB,OAEAC,EAAAzC,kBACAsB,EAAAH,KAAAuB,OAEAC,EAAA,KACA7B,EAAA8B,eAAA,IACAC,SAAAC,UAEAC,EAAA,KACAnC,EAAAoC,SAAAC,MAAA,KACAxC,EAAA0B,KAAA,CAAAO,KAAA,eAQAQ,EAAAC,IACA3D,EAAA,CAAA4D,MAAAD,EAAA9B,EAAAM,OACAe,KAAAS,EAAAZ,EAAAZ,OAAAwB,EAAAZ,EAAAZ,OAAAwB,EAAAV,EAAAd,iBANA0B,aAAA,KACArC,EAAAW,MAAA2B,IAAAC,OAAA,uBAAA,KAUA3C,EAAA4C"}