{"version":3,"file":"index.39934bba.js","sources":["../../src/mac/mode/index.vue"],"sourcesContent":["<template>\n\t<div\n\t\tclass=\"moveBg\"\n\t\tv-show=\"isShow\"\n\t\t@click=\"handleFocus\"\n\t\t@mousemove=\"mouseMove\"\n\t\t@mouseup=\"mouseUp\"\n\t\t@mouseleave.stop=\"mouseLeave\"\n\t\t:style=\"{ pointerEvents: isBoxResizing || isBoxMoving ? 'auto' : 'none' }\">\n\t\t<div\n\t\t\tclass=\"box\"\n\t\t\t:style=\"{ left: nowRect.left + 'px', top: nowRect.top + 'px', bottom: nowRect.bottom + 'px', right: nowRect.right + 'px' }\"\n\t\t\t:class=\"getExtBoxClasses()\">\n\t\t\t<div class=\"box-top\">\n\t\t\t\t<div class=\"box-top-left\" @mousedown=\"resizeMouseDown\"></div>\n\t\t\t\t<div class=\"box-top-center\" @mousedown=\"resizeMouseDown\"></div>\n\t\t\t\t<div class=\"box-top-right\" @mousedown=\"resizeMouseDown\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"box-center\">\n\t\t\t\t<div class=\"box-center-left\" @mousedown=\"resizeMouseDown\"></div>\n\t\t\t\t<div class=\"box-center-center loader\">\n\t\t\t\t\t<div class=\"app-bar\" :style=\"{ backgroundColor: app?.tabbarBgColor }\" @mousedown.stop=\"positionMouseDown\" @dblclick=\"appBarDoubleClicked\">\n\t\t\t\t\t\t<div class=\"controll\">\n\t\t\t\t\t\t\t<div class=\"close\" @click.stop=\"close\"></div>\n\t\t\t\t\t\t\t<div class=\"full\" :class=\"app?.disableResize ? 'full-disabled' : ''\" @click.stop=\"switchFullScreen\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"title\" :style=\"{ color: app?.tabbarTextColor }\">{{ app?.title }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<iframe :src=\"location + app?.path\" frameborder=\"0\" class=\"iframe\"></iframe>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"box-center-right\" @mousedown=\"resizeMouseDown\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"box-bottom\">\n\t\t\t\t<div class=\"box-bottom-left\" @mousedown=\"resizeMouseDown\"></div>\n\t\t\t\t<div class=\"box-bottom-center\" @mousedown=\"resizeMouseDown\"></div>\n\t\t\t\t<div class=\"box-bottom-right\" @mousedown=\"resizeMouseDown\"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { isURL } from 'utils/validate';\nimport { ref, reactive, computed, toRefs } from 'vue';\nconst props = defineProps({\n\tapp: Object,\n\tonDestroy: Function\n});\nconst { app } = toRefs(props);\nconst isShow = ref(true);\n// const defaultIndex = ref(10);\n// const activeIndex = ref(20);\nconst isBoxMoving = ref(false);\nlet startPosition = reactive({ x: 0, y: 0 });\nlet nowRect = reactive({\n\tleft: 100,\n\tright: 100,\n\ttop: 100,\n\tbottom: 100\n});\nlet startRect = reactive({\n\tleft: 0,\n\tright: 0,\n\ttop: 0,\n\tbottom: 0\n});\nconst isBoxResizing = ref(false);\nconst moveDirection = ref('false');\nconst isMaxShowing = ref(false);\nconst isFullScreen = ref(false);\n\nconst location = computed(() => {\n\treturn isURL(props.app?.path) ? '' : window.location.origin;\n});\n\nconst handleFocus = () => {\n\tlet list = document.getElementsByClassName('moveBg');\n\tif (list.length == 1) return;\n\tlet max = 0;\n\tfor (let i = 0; i < list.length; i++) {\n\t\tlet ele = list[i];\n\t\tlet box = ele.getElementsByClassName('box')[0]['style'];\n\t\tlet zIndex = Number(box.zIndex);\n\t\tif (max < zIndex) {\n\t\t\tmax = zIndex;\n\t\t}\n\t}\n\tmax = max + 1;\n\t//TODO\n\t// this.$el.getElementsByClassName('box')[0].style.zIndex = max;\n\tdocument.getElementsByClassName('box')[0]['style'].zIndex = max;\n};\nconst close = () => {\n\tisShow.value = false;\n\tprops.onDestroy?.();\n};\nconst switchFullScreen = () => {\n\tif (props.app?.disableResize) {\n\t\treturn;\n\t}\n\tisFullScreen.value = !isFullScreen.value;\n\tif (isFullScreen.value) {\n\t\tisMaxShowing.value = true;\n\t} else {\n\t\tisMaxShowing.value = false;\n\t}\n};\nconst getExtBoxClasses = () => {\n\tlet str = '';\n\tif (!isBoxResizing.value && !isBoxMoving.value) {\n\t\tstr += 'box-animation ';\n\t}\n\tif (isMaxShowing.value) {\n\t\tstr += 'isMaxShowing ';\n\t}\n\tif (isFullScreen.value) {\n\t\tstr += 'isFullScreen ';\n\t}\n\tif (props.app?.disableResize) {\n\t\tstr += 'resize-disabled ';\n\t}\n\tif (props.app?.isTop) {\n\t\tstr += 'isTop ';\n\t}\n\treturn str;\n};\nconst appBarDoubleClicked = () => {\n\tif (props.app?.disableResize) {\n\t\treturn;\n\t}\n\tisMaxShowing.value = !isMaxShowing.value;\n\tif (!isMaxShowing.value) {\n\t\tisFullScreen.value = false;\n\t}\n};\nconst positionMouseDown = (e: MouseEvent) => {\n\tif (isFullScreen.value || isMaxShowing.value) {\n\t\treturn;\n\t}\n\tstartRect = {\n\t\tleft: nowRect.left,\n\t\tright: nowRect.right,\n\t\ttop: nowRect.top,\n\t\tbottom: nowRect.bottom\n\t};\n\tstartPosition.x = e.clientX;\n\tstartPosition.y = e.clientY;\n\tisBoxMoving.value = true;\n};\nconst mouseUp = () => {\n\tisBoxMoving.value = false;\n\tisBoxResizing.value = false;\n\tmoveDirection.value = 'false';\n};\nconst mouseLeave = () => {\n\tisBoxMoving.value = false;\n\tisBoxResizing.value = false;\n\tmoveDirection.value = 'false';\n};\nconst mouseMove = (e: MouseEvent) => {\n\tif (isBoxResizing.value) {\n\t\tisFullScreen.value = false;\n\t\tisMaxShowing.value = false;\n\t\tswitch (moveDirection.value) {\n\t\t\tcase 'box-top-left':\n\t\t\t\tnowRect.top = startRect.top + (e.clientY - startPosition.y);\n\t\t\t\tnowRect.left = startRect.left + (e.clientX - startPosition.x);\n\t\t\t\tbreak;\n\t\t\tcase 'box-top-center':\n\t\t\t\tnowRect.top = startRect.top + (e.clientY - startPosition.y);\n\t\t\t\tbreak;\n\t\t\tcase 'box-top-right':\n\t\t\t\tnowRect.top = startRect.top + (e.clientY - startPosition.y);\n\t\t\t\tnowRect.right = startRect.right - (e.clientX - startPosition.x);\n\t\t\t\tbreak;\n\t\t\tcase 'box-center-left':\n\t\t\t\tnowRect.left = startRect.left + (e.clientX - startPosition.x);\n\t\t\t\tbreak;\n\t\t\tcase 'box-bottom-left':\n\t\t\t\tnowRect.left = startRect.left + (e.clientX - startPosition.x);\n\t\t\t\tnowRect.bottom = startRect.bottom - (e.clientY - startPosition.y);\n\t\t\t\tbreak;\n\t\t\tcase 'box-bottom-center':\n\t\t\t\tnowRect.bottom = startRect.bottom - (e.clientY - startPosition.y);\n\t\t\t\tbreak;\n\t\t\tcase 'box-center-right':\n\t\t\t\tnowRect.right = startRect.right - (e.clientX - startPosition.x);\n\t\t\t\tbreak;\n\t\t\tcase 'box-bottom-right':\n\t\t\t\tnowRect.right = startRect.right - (e.clientX - startPosition.x);\n\t\t\t\tnowRect.bottom = startRect.bottom - (e.clientY - startPosition.y);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\t\treturn;\n\t}\n\tif (isBoxMoving.value) {\n\t\tisFullScreen.value = false;\n\t\tisMaxShowing.value = false;\n\t\tnowRect.left = startRect.left + (e.clientX - startPosition.x);\n\t\tnowRect.right = startRect.right - (e.clientX - startPosition.x);\n\t\tnowRect.top = startRect.top + (e.clientY - startPosition.y);\n\t\tnowRect.bottom = startRect.bottom - (e.clientY - startPosition.y);\n\t\treturn;\n\t}\n};\nconst resizeMouseDown = (e: MouseEvent) => {\n\tif (props.app?.disableResize) {\n\t\treturn;\n\t}\n\tif (isFullScreen.value || isMaxShowing.value) {\n\t\treturn;\n\t}\n\tstartRect = {\n\t\tleft: nowRect.left,\n\t\ttop: nowRect.top,\n\t\tright: nowRect.right,\n\t\tbottom: nowRect.bottom\n\t};\n\tstartPosition.x = e.clientX;\n\tstartPosition.y = e.clientY;\n\tisBoxResizing.value = true;\n\tmoveDirection.value = e.target?.['className'];\n};\n\nif (props.app?.width) {\n\tnowRect.left = nowRect.right = (document.body.clientWidth - props.app.width) / 2;\n}\nif (props.app?.height) {\n\tnowRect.bottom = (document.body.clientHeight - props.app.height) / 2 + 50;\n\tnowRect.top = (document.body.clientHeight - props.app.height) / 2 - 50;\n}\n</script>\n<style scoped>\n.iframe {\n\twidth: 100%;\n\theight: calc(100% - 50px);\n\tmargin-top: 5px;\n\tborder-right: 5px;\n}\n.moveBg {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tleft: 0;\n}\n.box {\n\tposition: absolute;\n\tdisplay: flex;\n\tflex-direction: column;\n\tpointer-events: auto;\n\n\t--resize: 5px;\n\t--resize-bg: transparent;\n\t--resize-main: transparent;\n\t--resize-bg-main: transparent;\n}\n.box-top {\n\tdisplay: flex;\n\tflex-direction: row;\n}\n.box-top-left {\n\twidth: var(--resize);\n\theight: var(--resize);\n\tcursor: nw-resize;\n\tbackground: var(--resize-bg);\n}\n.box-top-center {\n\tflex-grow: 1;\n\theight: var(--resize);\n\tcursor: n-resize;\n\tbackground: var(--resize-bg-main);\n}\n.box-top-right {\n\twidth: var(--resize);\n\theight: var(--resize);\n\tcursor: ne-resize;\n\tbackground: var(--resize-bg);\n}\n.box-center {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-grow: 1;\n}\n.box-center-left {\n\twidth: var(--resize);\n\theight: 100%;\n\tcursor: w-resize;\n\tbackground: var(--resize-bg-main);\n}\n.box-center-center {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\theight: 100%;\n\toverflow: hidden;\n\tbackground: rgb(255 255 255 / 80%);\n\tborder-radius: 10px;\n\tbox-shadow: 0 0 3px #999999;\n\tbackdrop-filter: blur(20px);\n}\n.isTop .box-center-center {\n\tfilter: none;\n\tbox-shadow: 0 0 20px rgb(0 0 0 / 50%);\n}\n.box-animation {\n\ttransition: width 0.1s, height 0.1s, left 0.1s, right 0.1s, top 0.1s, bottom 0.1s;\n}\n.isMaxShowing {\n\ttop: 24px !important;\n\tright: -5px !important;\n\tbottom: 47px !important;\n\tleft: -5px !important;\n\theight: calc(100% - 24px);\n}\n.isFullScreen {\n\tposition: fixed !important;\n\tbottom: -5px !important;\n\tz-index: 999 !important;\n}\n.isMaxShowing .box-center-center,\n.isFullScreen .box-center-center {\n\tborder-radius: 0 !important;\n}\n.box-center-right {\n\twidth: var(--resize);\n\theight: 100%;\n\tcursor: e-resize;\n\tbackground: var(--resize-bg-main);\n}\n.box-bottom {\n\tdisplay: flex;\n\tflex-direction: row;\n}\n.box-bottom-left {\n\twidth: var(--resize);\n\theight: var(--resize);\n\tcursor: sw-resize;\n\tbackground: var(--resize-bg);\n}\n.box-bottom-center {\n\tflex-grow: 1;\n\theight: var(--resize);\n\tcursor: s-resize;\n\tbackground: var(--resize-bg-main);\n}\n.box-bottom-right {\n\twidth: var(--resize);\n\theight: var(--resize);\n\tcursor: se-resize;\n\tbackground: var(--resize-bg);\n}\n.loader {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\twidth: 100%;\n}\n.app-bar {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n\theight: 40px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n\tbackground: rgb(255 255 255 / 50%);\n\tbackdrop-filter: blur(20px);\n}\n.app-bar .controll {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-left: 15px;\n}\n.app-bar .controll div {\n\twidth: 11px;\n\theight: 11px;\n\tmargin-right: 8px;\n\tcursor: pointer;\n\tborder-radius: 100%;\n}\n.app-bar .title {\n\tflex-grow: 1;\n\tmargin-right: 80px;\n\tfont-size: 13px;\n\tfont-weight: 500;\n\tcolor: #333333;\n\ttext-align: center;\n\ttext-shadow: none;\n\tcursor: move;\n}\n.controll .close {\n\tbackground: #fc605c;\n\tborder: 1px solid #fc635d;\n}\n.controll .min {\n\tbackground: #fcbb40;\n\tborder: 1px solid #f8b438;\n}\n.controll .full {\n\tbackground: #34c648;\n\tborder: 1px solid #2bc03f;\n}\n.full-disabled {\n\tbackground: #cccccc !important;\n\tborder: 1px solid #cccccc !important;\n}\n.resize-disabled .box-top-left,\n.resize-disabled .box-top-center,\n.resize-disabled .box-top-right,\n.resize-disabled .box-center-left,\n.resize-disabled .box-center-right,\n.resize-disabled .box-bottom-left,\n.resize-disabled .box-bottom-center,\n.resize-disabled .box-bottom-right {\n\tcursor: default;\n}\n.app-body {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\talign-items: center;\n\tjustify-content: center;\n}\n</style>\n"],"names":["app","Vue","toRefs","props","isShow","isBoxMoving","startPosition","reactive","x","y","nowRect","left","right","top","bottom","startRect","isBoxResizing","moveDirection","isMaxShowing","isFullScreen","location","isURL","_a2","path","window","origin","handleFocus","list","document","getElementsByClassName","length","max","i","box","zIndex","Number","close","value","onDestroy","call","switchFullScreen","disableResize","getExtBoxClasses","str","_b2","isTop","appBarDoubleClicked","positionMouseDown","e","clientX","clientY","mouseUp","mouseLeave","mouseMove","resizeMouseDown","target","_a","width","body","clientWidth","_b","height","clientHeight"],"mappings":"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"}