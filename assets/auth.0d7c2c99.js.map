{"version":3,"file":"auth.0d7c2c99.js","sources":["../../src/api/auth.ts"],"sourcesContent":["import { RequestEnum } from 'app/enums/http';\nimport axios from 'http/axios';\n// import md5 from \"js-md5\";\n\nexport const info = (domain: string) => {\n\treturn axios.get('/blade-system/tenant/info', {\n\t\tdomain\n\t});\n};\ninterface LoginResult {\n\taccess_token: string;\n\tuser_id: string;\n}\n\n/**\n * 登录\n * @param tenantId\n * @param username\n * @param password\n * @param type\n * @param key\n * @param code\n */\nexport const login = (tenantId: string, username: string, password: string, type: string, key: string, code: string) => {\n\treturn axios.request<never, LoginResult>({\n\t\turl: '/blade-auth/oauth/token',\n\t\tmethod: RequestEnum.POST,\n\t\tparams: {\n\t\t\ttenantId,\n\t\t\tusername,\n\t\t\tpassword,\n\t\t\tgrant_type: 'captcha',\n\t\t\tscope: 'all',\n\t\t\ttype\n\t\t},\n\t\theaders: {\n\t\t\t'Tenant-Id': tenantId,\n\t\t\t'Captcha-Key': key,\n\t\t\t'Captcha-Code': code,\n\t\t\t'User-Type': 'web_admin'\n\t\t}\n\t});\n};\nexport const getExcel = (params: unknown) => {\n\treturn axios.request<never, unknown>({\n\t\turl: `/lecent-mall/report/export`,\n\t\tresponseType: 'arraybuffer',\n\t\tmethod: 'get',\n\t\tparams\n\t});\n};\n\n/**\n * 登录图片验证码\n * @returns\n */\ninterface ImageCode {\n\tkey: string;\n\timage: string;\n}\n// * 无 ResultData 包裹\nexport const GetCaptcha = () => axios.get<never, ImageCode>('/blade-auth/oauth/captcha');\n// * 有 ResultData 包裹\nexport const GetCaptcha1 = () =>\n\taxios.request<ImageCode>({\n\t\turl: '/blade-auth/oauth/captcha?111'\n\t});\n\n/**\n * 退出登录\n * @returns\n */\nexport const Logout = () => axios.get('/blade-auth/oauth/logout');\n\n/**\n * 刷新token\n * @param refresh_token\n * @param tenantId\n * @returns\n */\nexport const RefreshToken = (refresh_token: string) =>\n\taxios.post(\n\t\t'/blade-auth/oauth/token',\n\t\t{\n\t\t\ttenantId: '000000',\n\t\t\trefresh_token,\n\t\t\tgrant_type: 'refresh_token',\n\t\t\tscope: 'all'\n\t\t},\n\t\t{\n\t\t\theaders: {\n\t\t\t\t'Tenant-Id': '000000'\n\t\t\t}\n\t\t}\n\t);\n"],"names":["info","domain","axios","get","login","tenantId","username","password","type","key","code","request","url","method","RequestEnum","POST","params","grant_type","scope","headers","getExcel","responseType","GetCaptcha","GetCaptcha1","Logout","RefreshToken","refresh_token","post"],"mappings":"+CAIa,MAAAA,EAAQC,GACbC,EAAMC,IAAI,4BAA6B,CAC7CF,OAAAA,IAiBWG,EAAQ,CAACC,EAAkBC,EAAkBC,EAAkBC,EAAcC,EAAaC,IAC/FR,EAAMS,QAA4B,CACxCC,IAAK,0BACLC,OAAQC,EAAYC,KACpBC,OAAQ,CACPX,SAAAA,EACAC,SAAAA,EACAC,SAAAA,EACAU,WAAY,UACZC,MAAO,MACPV,KAAAA,GAEDW,QAAS,CACR,YAAad,EACb,cAAeI,EACf,eAAgBC,EAChB,YAAa,eAIHU,EAAYJ,GACjBd,EAAMS,QAAwB,CACpCC,IAAK,6BACLS,aAAc,cACdR,OAAQ,MACRG,OAAAA,IAaWM,EAAa,IAAMpB,EAAMC,IAAsB,6BAE/CoB,EAAc,IAC1BrB,EAAMS,QAAmB,CACxBC,IAAK,kCAOMY,EAAS,IAAMtB,EAAMC,IAAI,4BAQzBsB,EAAgBC,GAC5BxB,EAAMyB,KACL,0BACA,CACCtB,SAAU,SACVqB,cAAAA,EACAT,WAAY,gBACZC,MAAO,OAER,CACCC,QAAS,CACR,YAAa"}