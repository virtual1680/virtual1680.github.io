{"version":3,"file":"index.9c18db1e.js","sources":["../../src/mac/mode/index.ts","../../src/mac/index.vue"],"sourcesContent":["import MessageConstructor from './index.vue';\r\nimport { createVNode, render } from 'vue';\r\nexport default (function () {\r\n\treturn (opts = {}) => {\r\n\t\tlet options = {\r\n\t\t\tapp: opts\r\n\t\t};\r\n\t\tconst parent = document.createElement('div');\r\n\t\tlet instance = createVNode(MessageConstructor, options);\r\n\t\tinstance.props!.onDestroy = () => {\r\n\t\t\trender(null, parent);\r\n\t\t};\r\n\t\trender(instance, parent);\r\n\t\tdocument.body.appendChild(parent.firstElementChild!);\r\n\t\treturn instance;\r\n\t};\r\n})();\r\n","<template>\r\n\t<div class=\"mac_bg\"></div>\r\n\t<div class=\"desktop\">\r\n\t\t<div class=\"top\">\r\n\t\t\t<el-dropdown trigger=\"click\">\r\n\t\t\t\t<div class=\"logo\"><i class=\"iconfont icon-pingguo\"></i></div>\r\n\t\t\t\t<template #dropdown>\r\n\t\t\t\t\t<el-dropdown-menu>\r\n\t\t\t\t\t\t<el-dropdown-item>\r\n\t\t\t\t\t\t\t<div>{{ userInfo.username }}</div>\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item>\r\n\t\t\t\t\t\t\t<top-lock text=\"锁定屏幕\"></top-lock>\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item>\r\n\t\t\t\t\t\t\t<div @click=\"switchTheme\">退出主题</div>\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item @click=\"logout\">{{ $t('navbar.logOut') }}</el-dropdown-item>\r\n\t\t\t\t\t</el-dropdown-menu>\r\n\t\t\t\t</template>\r\n\t\t\t</el-dropdown>\r\n\t\t\t<div class=\"space\"></div>\r\n\t\t\t<div class=\"status\">\r\n\t\t\t\t<div class=\"audio\"><i class=\"iconfont icon-changyongtubiao-xianxingdaochu-zhuanqu-39\"></i></div>\r\n\t\t\t\t<div class=\"datetime\">{{ timeString }}</div>\r\n\t\t\t\t<div class=\"notification\"><i class=\"iconfont icon-changyongtubiao-xianxingdaochu-zhuanqu-25\"></i></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"body\">\r\n\t\t\t<div class=\"desktop-app\">\r\n\t\t\t\t<template v-for=\"item in deskTopAppList\" :key=\"item.key\">\r\n\t\t\t\t\t<div class=\"app-item\" @click=\"openApp(item)\" v-if=\"!item.hideInDesktop\">\r\n\t\t\t\t\t\t<div class=\"icon\" :style=\"{ backgroundColor: item.iconBgColor, color: item.iconColor }\">\r\n\t\t\t\t\t\t\t<i class=\"iconfont\" :class=\"item[iconKey]\"></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"title\">{{ item[labelKey] }}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"footer\">\r\n\t\t\t<div class=\"space\"></div>\r\n\t\t\t<div class=\"dock\">\r\n\t\t\t\t<template v-for=\"item in openAppList\" :key=\"item.key\">\r\n\t\t\t\t\t<div class=\"item\" @click=\"openApp(item)\">\r\n\t\t\t\t\t\t<i :style=\"{ backgroundColor: item.iconBgColor, color: item.iconColor }\" class=\"iconfont\" :class=\"item[iconKey]\"></i>\r\n\t\t\t\t\t\t<small style=\"margin-top: 5px; font-size: 10px\">{{ item[labelKey] }}</small>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"space\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport $Mode from './mode/index';\r\n// import index from '@/mixins/index';\r\nimport topLock from '@/page/index/top/top-lock.vue';\r\nimport { computed, ref } from 'vue';\r\nimport website from '@/config/website';\r\nimport { useCommonStore, useUserStore } from '@/store';\r\nimport dayjs from 'dayjs';\r\nimport { useRouter } from 'vue-router';\r\n// mixins: [index],\r\nconst router = useRouter();\r\nconst userStore = useUserStore();\r\n// const tagsStore = useTagsStore();\r\nconst commonStore = useCommonStore();\r\n// const app = ref(false);\r\nconst timeString = ref('');\r\n\r\n// const isMacOs = computed(() => {\r\n// \treturn commonStore.getIsMacOs;\r\n// });\r\n// const tagList = computed(() => {\r\n// \treturn tagsStore.getTagList;\r\n// });\r\n// const tag = computed(() => {\r\n// \treturn tagsStore.getTag;\r\n// });\r\nconst userInfo = computed(() => {\r\n\treturn userStore.getUserInfo;\r\n});\r\nconst menu = computed(() => {\r\n\treturn userStore.getMenu;\r\n});\r\nconst labelKey = computed(() => {\r\n\treturn website.menu.label;\r\n});\r\nconst openAppList = computed(() => {\r\n\treturn [] as RouterMenu[];\r\n});\r\n\r\nconst deskTopAppList = computed(() => {\r\n\treturn menuList.value;\r\n});\r\nconst menuList = computed(() => {\r\n\tlet result: RouterMenu[] = [];\r\n\tconst findMenu = (list: RouterMenu[]) => {\r\n\t\tlist.forEach(ele => {\r\n\t\t\tif (ele[childrenKey.value] && ele[childrenKey.value].length !== 0) {\r\n\t\t\t\tfindMenu(ele[childrenKey.value]);\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(ele);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tfindMenu(menu.value);\r\n\treturn result;\r\n});\r\nconst iconKey = computed(() => {\r\n\treturn website.menu.icon;\r\n});\r\n// const queryKey = computed(() => {\r\n// \treturn website.menu.query;\r\n// });\r\nconst childrenKey = computed(() => {\r\n\treturn website.menu.children;\r\n});\r\nconst hrefKey = computed(() => {\r\n\treturn website.menu.href;\r\n});\r\nconst pathKey = computed(() => {\r\n\treturn website.menu.path;\r\n});\r\nconst switchTheme = () => {\r\n\tcommonStore.SET_THEME_NAME('');\r\n\tlocation.reload();\r\n};\r\nconst logout = () => {\r\n\tuserStore.LogOut().then(() => {\r\n\t\trouter.push({ path: '/login' });\r\n\t});\r\n};\r\nconst startTimer = () => {\r\n\tsetInterval(() => {\r\n\t\ttimeString.value = dayjs().format('YYYY年MM月DD日 HH:mm');\r\n\t}, 1000);\r\n};\r\nconst openApp = (item: RouterMenu) => {\r\n\t$Mode({\r\n\t\ttitle: item[labelKey.value],\r\n\t\tpath: item[hrefKey.value] ? item[hrefKey.value] : item[pathKey.value]\r\n\t});\r\n};\r\nstartTimer();\r\nuserStore.GetMenu();\r\n</script>\r\n<style>\r\n.top .el-dropdown {\r\n\theight: 100% !important;\r\n\tcolor: white !important;\r\n}\r\n</style>\r\n<style scoped>\r\n.desktop {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\toverflow: hidden;\r\n\tcolor: white;\r\n\ttext-shadow: 0 2px 2px rgb(0 0 0 / 10%);\r\n}\r\n.top {\r\n\tz-index: 100;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\theight: 28px;\r\n\tpadding: 0 5px;\r\n\tfont-size: 14px;\r\n\tbackground-color: rgb(0 0 0 / 30%);\r\n\tbackdrop-filter: blur(20px);\r\n}\r\n.space {\r\n\tflex-grow: 1;\r\n}\r\n.logo {\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\theight: 100%;\r\n\tpadding: 0 15px;\r\n\tcursor: pointer;\r\n}\r\n.logo .el-select {\r\n\tposition: absolute;\r\n\topacity: 0;\r\n}\r\n.logo:hover {\r\n\tbackground-color: rgb(255 255 255 / 10%);\r\n}\r\n.logo .iconfont {\r\n\tmargin-top: -3px;\r\n\tfont-size: 16px;\r\n}\r\n.menu .item:hover {\r\n\tbackground-color: rgb(255 255 255 / 10%);\r\n}\r\n.status {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\theight: 100%;\r\n}\r\n.audio .iconfont,\r\n.notification .iconfont {\r\n\tfont-size: 20px;\r\n}\r\n.datetime,\r\n.audio,\r\n.notification {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\theight: 100%;\r\n\tpadding: 0 10px;\r\n\ttext-align: center;\r\n\tcursor: pointer;\r\n}\r\n.datetime:hover,\r\n.audio:hover,\r\n.notification:hover {\r\n\tbackground-color: rgb(255 255 255 / 10%);\r\n}\r\n.body {\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-grow: 1;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n.footer {\r\n\tposition: fixed;\r\n\tright: 5px;\r\n\tbottom: 5px;\r\n\tleft: 5px;\r\n\tz-index: 100;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n.footer .dock {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tpadding: 2px;\r\n\tbackground-color: rgb(255 255 255 / 10%);\r\n\tborder: 1px solid rgb(255 255 255 / 10%);\r\n\tborder-radius: 10px;\r\n\tbox-shadow: 0 0 10px rgb(0 0 0 / 20%);\r\n\tbackdrop-filter: blur(20px);\r\n}\r\n.dock .item {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tpadding: 3px;\r\n}\r\n.dock .dot {\r\n\tposition: absolute;\r\n\tbottom: 0;\r\n\tdisplay: inline-block;\r\n\twidth: 3px;\r\n\theight: 3px;\r\n\tfont-size: 0;\r\n\tbackground: rgb(0 0 0 / 80%);\r\n\tborder-radius: 5px;\r\n}\r\n.dock .item .iconfont {\r\n\tdisplay: inline-block;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\twidth: 30px;\r\n\theight: 30px;\r\n\tpadding: 2px;\r\n\tfont-size: 24px;\r\n\ttext-align: center;\r\n\tcursor: pointer;\r\n\tbackground-color: rgb(255 255 255 / 10%);\r\n\tborder-radius: 20px;\r\n\tborder-radius: 10px;\r\n\ttransition: transform 0.3s, margin 0.3s;\r\n}\r\n.dock .item:hover .iconfont {\r\n\tmargin: 0 15px;\r\n\tbox-shadow: 0 0 10px rgb(0 0 0 / 30%);\r\n\ttransform: scale(2) translateY(-10px);\r\n}\r\n.dock .nearby .iconfont {\r\n\tmargin: 0 12px;\r\n\tbox-shadow: 0 0 10px rgb(0 0 0 / 30%);\r\n\ttransform: scale(1.6) translateY(-8px);\r\n}\r\n.dock .nearby1 .iconfont {\r\n\tmargin: 0 9px;\r\n\tbox-shadow: 0 0 10px rgb(0 0 0 / 30%);\r\n\ttransform: scale(1.2) translateY(-6px);\r\n}\r\n.dock .nearby2 .iconfont {\r\n\tmargin: 0 7px;\r\n\tbox-shadow: 0 0 10px rgb(0 0 0 / 30%);\r\n\ttransform: scale(1.1) translateY(-5px);\r\n}\r\n.desktop-app {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tdisplay: flex;\r\n\tflex-flow: column wrap-reverse;\r\n\talign-items: flex-end;\r\n\tjustify-content: flex-start;\r\n\tpadding: 20px;\r\n}\r\n.app-item {\r\n\tflex-direction: column;\r\n\tpadding: 5px;\r\n\tmargin: 5px 10px;\r\n\ttext-align: center;\r\n\ttext-shadow: 0 0 2px rgb(0 0 0 / 50%);\r\n\tcursor: pointer;\r\n\tborder: 2px solid transparent;\r\n\tborder-radius: 10px;\r\n}\r\n.app-item .icon {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\twidth: 50px;\r\n\theight: 50px;\r\n\tborder-radius: 10px;\r\n}\r\n.app-item .iconfont {\r\n\tfont-size: 36px;\r\n}\r\n.app-item .title {\r\n\twidth: 50px;\r\n\tmargin-top: 5px;\r\n\toverflow: hidden;\r\n\tfont-size: 12px;\r\n\ttext-overflow: ellipsis;\r\n\twhite-space: nowrap;\r\n}\r\n.app-item:hover {\r\n\tborder: 2px solid rgb(255 255 255 / 50%);\r\n}\r\n</style>\r\n"],"names":["$Mode","opts","options","app","parent","document","createElement","instance","Vue","createVNode","MessageConstructor","props","onDestroy","render","body","appendChild","firstElementChild","router","VueRouter","useRouter","userStore","useUserStore","commonStore","useCommonStore","timeString","userInfo","getUserInfo","menu","getMenu","labelKey","website","label","openAppList","deskTopAppList","menuList","value","result","findMenu","list","forEach","ele","childrenKey","length","push","iconKey","icon","children","hrefKey","href","pathKey","path","switchTheme","SET_THEME_NAME","location","reload","logout","LogOut","then","openApp","item","title","setInterval","dayjs","format","GetMenu"],"mappings":"8GAEA,IAAAA,EACC,CAAAC,EAAA,MACC,IAAAC,EAAA,CAAcC,IAAAF,GAGd,MAAAG,EAAAC,SAAAC,cAAA,OACA,IAAAC,EAAeC,IAAYC,YAAAC,EAAAR,GAM3B,OALAK,EAAAI,MAAAC,UAAA,KACCJ,IAAAK,OAAA,KAAAT,IAEDI,IAAAK,OAAAN,EAAAH,GACAC,SAAAS,KAAAC,YAAAX,EAAAY,mBACAT,ujCCkDF,MAAAU,EAAAC,UAAAC,YACAC,EAAAC,IAEAC,EAAAC,IAEAC,EAAAhB,YAWAiB,EAAAjB,kBACAY,EAAAM,cAEAC,EAAAnB,kBACAY,EAAAQ,UAEAC,EAAArB,kBACAsB,EAAAH,KAAAI,QAEAC,EAAAxB,kBACA,KAGAyB,EAAAzB,kBACA0B,EAAAC,QAEAD,EAAA1B,mBACA,IAAA4B,EAAA,GACA,MAAAC,EAAAC,IACAA,EAAAC,SAAAC,IACAA,EAAAC,EAAAN,QAAA,IAAAK,EAAAC,EAAAN,OAAAO,OACAL,EAAAG,EAAAC,EAAAN,QAEAC,EAAAO,KAAAH,OAKA,OADAH,EAAAV,EAAAQ,OACAC,KAEAQ,EAAApC,kBACAsB,EAAAH,KAAAkB,OAKAJ,EAAAjC,kBACAsB,EAAAH,KAAAmB,WAEAC,EAAAvC,kBACAsB,EAAAH,KAAAqB,OAEAC,EAAAzC,kBACAsB,EAAAH,KAAAuB,OAEAC,EAAA,KACA7B,EAAA8B,eAAA,IACAC,SAAAC,UAEAC,EAAA,KACAnC,EAAAoC,SAAAC,MAAA,KACAxC,EAAA0B,KAAA,CAAAO,KAAA,eAQAQ,EAAAC,IACA3D,EAAA,CAAA4D,MAAAD,EAAA9B,EAAAM,OACAe,KAAAS,EAAAZ,EAAAZ,OAAAwB,EAAAZ,EAAAZ,OAAAwB,EAAAV,EAAAd,iBANA0B,aAAA,KACArC,EAAAW,MAAA2B,IAAAC,OAAA,uBAAA,KAUA3C,EAAA4C"}